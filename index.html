<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema POS</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container-fluid">
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">Sistema POS</a>
            </div>
        </nav>

        <div class="row mt-3">
            <div class="col-md-2">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist">
                    <button class="nav-link active" id="v-pills-caja-tab" data-bs-toggle="pill" data-bs-target="#v-pills-caja">
                        <i class="bi bi-cash-register"></i> Caja
                    </button>
                    <button class="nav-link" id="v-pills-productos-tab" data-bs-toggle="pill" data-bs-target="#v-pills-productos">
                        <i class="bi bi-box"></i> Productos
                    </button>
                    <button class="nav-link" id="v-pills-clientes-tab" data-bs-toggle="pill" data-bs-target="#v-pills-clientes">
                        <i class="bi bi-people"></i> Clientes
                    </button>
                    <button class="nav-link" id="v-pills-puntos-tab" data-bs-toggle="pill" data-bs-target="#v-pills-puntos">
                        <i class="bi bi-gift"></i> Canje por Puntos
                    </button>
                    <button class="nav-link" id="v-pills-corte-tab" data-bs-toggle="pill" data-bs-target="#v-pills-corte">
                        <i class="bi bi-cash-coin"></i> Corte
                    </button>
                    <button class="nav-link" id="v-pills-tickets-tab" data-bs-toggle="pill" data-bs-target="#v-pills-tickets">
                        <i class="bi bi-receipt"></i> Tickets
                    </button>
                    <button class="nav-link" id="v-pills-config-tab" data-bs-toggle="pill" data-bs-target="#v-pills-config">
                        <i class="bi bi-gear"></i> Configuración
                    </button>
                </div>
            </div>
            <div class="col-md-10">
                <div class="tab-content" id="v-pills-tabContent">
                    <!-- Pestaña Caja -->
                    <div class="tab-pane fade show active" id="v-pills-caja">
                        <div class="row">
                            <div class="col-md-8">
                                <div class="card mb-3">
                                    <div class="card-header">
                                        <h5>Seleccionar Cliente</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <select class="form-select" id="selectCliente" onchange="seleccionarCliente(this.value)">
                                                    <option value="">Seleccione un cliente</option>
                                                </select>
                                            </div>
                                            <div class="col-md-6">
                                                <div class="d-flex justify-content-between align-items-center">
                                                    <span>Cliente seleccionado: <strong id="clienteSeleccionado">Ninguno</strong></span>
                                                    <span>Puntos disponibles: <strong id="puntosCliente">0</strong></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card mb-3">
                                    <div class="card-header">
                                        <h5>Productos Disponibles</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="row" id="productos-disponibles">
                                            <!-- Productos disponibles se mostrarán aquí -->
                                        </div>
                                    </div>
                                </div>
                                <div class="card">
                                    <div class="card-header">
                                        <h5>Carrito de Compra</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>Producto</th>
                                                        <th>Cantidad</th>
                                                        <th>Precio</th>
                                                        <th>Total</th>
                                                        <th>Acciones</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="carrito-items">
                                                    <!-- Items del carrito se agregarán aquí -->
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card">
                                    <div class="card-header">
                                        <h5>Total</h5>
                                    </div>
                                    <div class="card-body">
                                        <h3 class="text-end">$0.00</h3>
                                        <div class="alert alert-info">
                                            Puntos a ganar: <strong id="puntosAGanar">0</strong>
                                        </div>
                                        <div class="d-grid gap-2 mb-2">
                                            <button class="btn btn-primary" onclick="mostrarModalVentaComun()">Venta Común</button>
                                            <button class="btn btn-success" onclick="mostrarModalVentaCliente()">Venta a Cliente</button>
                                            <button class="btn btn-secondary" onclick="carrito = []; actualizarCarrito();">Cancelar Venta</button>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-info" onclick="mostrarModalEntrada()">Entradas</button>
                                            <button class="btn btn-danger" onclick="mostrarModalSalida()">Salidas</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pestaña Productos -->
                    <div class="tab-pane fade" id="v-pills-productos">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5>Gestión de Productos</h5>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalProducto">
                                    <i class="bi bi-plus"></i> Nuevo Producto
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>Imagen</th>
                                                <th>Nombre</th>
                                                <th>Precio</th>
                                                <th>Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="productos-lista">
                                            <!-- Lista de productos se agregará aquí -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pestaña Clientes -->
                    <div class="tab-pane fade" id="v-pills-clientes">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5>Gestión de Clientes</h5>
                                <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalCliente">
                                    <i class="bi bi-plus"></i> Nuevo Cliente
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Nombre</th>
                                                <th>Email</th>
                                                <th>Teléfono</th>
                                                <th>Puntos</th>
                                                <th>Acciones</th>
                                            </tr>
                                        </thead>
                                        <tbody id="clientes-lista">
                                            <!-- Lista de clientes se agregará aquí -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pestaña Canje por Puntos -->
                    <div class="tab-pane fade" id="v-pills-puntos">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5>Productos para Canje</h5>
                                <div>
                                    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#modalPuntos">
                                        <i class="bi bi-plus"></i> Nuevo Producto
                                    </button>
                                    <button class="btn btn-success" onclick="compartirProductosCanje()">
                                        <i class="bi bi-share"></i> Compartir productos de canje
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="row mb-3">
                                    <div class="col">
                                        <h4>Canje por Puntos</h4>
                                    </div>
                                    <div class="col text-end">
                                        <button class="btn btn-primary" onclick="mostrarHistorialCanjes()">
                                            <i class="bi bi-clock-history"></i> Historial de Canjes
                                        </button>
                                    </div>
                                </div>
                                <div class="row" id="productos-puntos">
                                    <!-- Productos para canje se mostrarán aquí -->
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pestaña Corte -->
                    <div class="tab-pane fade" id="v-pills-corte">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <h5>Corte de Caja</h5>
                                <button class="btn btn-primary" onclick="mostrarModalCorte()">
                                    <i class="bi bi-printer"></i> Realizar Corte
                                </button>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">Ventas</h5>
                                                <div class="table-responsive">
                                                    <table class="table table-sm">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Fecha</th>
                                                                <th>Tipo</th>
                                                                <th>Cliente</th>
                                                                <th>Total</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="tabla-ventas-corte"></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">Entradas</h5>
                                                <div class="table-responsive">
                                                    <table class="table table-sm">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Fecha</th>
                                                                <th>Motivo</th>
                                                                <th>Cantidad</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="tabla-entradas-corte"></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="card">
                                            <div class="card-body">
                                                <h5 class="card-title">Salidas</h5>
                                                <div class="table-responsive">
                                                    <table class="table table-sm">
                                                        <thead>
                                                            <tr>
                                                                <th>#</th>
                                                                <th>Fecha</th>
                                                                <th>Motivo</th>
                                                                <th>Cantidad</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody id="tabla-salidas-corte"></tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="text-center mt-3">
                                    <h4>Total en Caja: <span id="total-en-caja-corte">$0.00</span></h4>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pestaña Tickets -->
                    <div class="tab-pane fade" id="v-pills-tickets">
                        <div class="card">
                            <div class="card-header">
                                <h5>Configuración de Tickets</h5>
                            </div>
                            <div class="card-body">
                                <form id="formTicketConfig">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6>Encabezado del Ticket</h6>
                                            <div class="mb-3">
                                                <label class="form-label">Nombre de la Tienda</label>
                                                <input type="text" class="form-control" id="ticketNombreTienda">
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Líneas de Encabezado</label>
                                                <textarea class="form-control" id="ticketEncabezado" rows="3" placeholder="Cada línea será impresa en el encabezado del ticket"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Pie del Ticket</h6>
                                            <div class="mb-3">
                                                <label class="form-label">Líneas de Pie</label>
                                                <textarea class="form-control" id="ticketPie" rows="3" placeholder="Cada línea será impresa al final del ticket"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <h6>Estilo de Impresión</h6>
                                            <div class="mb-3">
                                                <label class="form-label">Tipo de Letra</label>
                                                <select class="form-select" id="ticketFuente">
                                                    <option value="monospace">Monospace</option>
                                                    <option value="Arial">Arial</option>
                                                    <option value="Courier New">Courier New</option>
                                                    <option value="Times New Roman">Times New Roman</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Tamaño de Letra</label>
                                                <select class="form-select" id="ticketTamanoFuente">
                                                    <option value="10">Pequeño (10px)</option>
                                                    <option value="11">Normal (11px)</option>
                                                    <option value="12">Grande (12px)</option>
                                                    <option value="14">Muy Grande (14px)</option>
                                                    <option value="16">Extra Grande (16px)</option>
                                                    <option value="18">Super Grande (18px)</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" id="ticketNegrita">
                                                    <label class="form-check-label" for="ticketNegrita">
                                                        Texto en Negrita
                                                    </label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Vista Previa</h6>
                                            <div class="border p-3" id="ticketPreview" style="font-family: monospace; font-size: 11px; width: 384px; margin: 0 auto;">
                                                <!-- La vista previa se actualizará aquí -->
                                            </div>
                                        </div>
                                    </div>
                                    <div class="mt-3">
                                        <button type="button" class="btn btn-primary" onclick="guardarConfigTicket()">Guardar Cambios</button>
                                        <button type="button" class="btn btn-secondary" onclick="actualizarVistaPrevia()">Actualizar Vista Previa</button>
                                        <button type="button" class="btn btn-info" onclick="imprimirTicketPrueba()">Imprimir Prueba</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <!-- Pestaña Configuración -->
                    <div class="tab-pane fade" id="v-pills-config">
                        <div class="card">
                            <div class="card-header">
                                <h5>Configuración y Respaldo</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-4">
                                    <button class="btn btn-success me-2" onclick="exportarDatos()">
                                        <i class="bi bi-download"></i> Exportar respaldo
                                    </button>
                                    <label class="btn btn-primary mb-0">
                                        <i class="bi bi-upload"></i> Importar respaldo
                                        <input type="file" id="inputImportar" accept="application/json" style="display:none" onchange="importarDatos(event)">
                                    </label>
                                </div>
                                <div class="alert alert-info">
                                    Puedes exportar todos los datos del sistema a un archivo .json para respaldo o importarlos en caso de restauración o migración.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Producto -->
    <div class="modal fade" id="modalProducto" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Nuevo Producto</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formProducto">
                        <div class="mb-3">
                            <label class="form-label">Imagen del Producto</label>
                            <input type="file" class="form-control" id="imagenProducto" accept="image/*" onchange="previsualizarImagen(this)">
                            <img id="previewImagen" src="" alt="Vista previa" style="max-width: 200px; display: none; margin-top: 10px;">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Nombre del Producto</label>
                            <input type="text" class="form-control" id="nombreProducto" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Precio (MXN)</label>
                            <input type="number" class="form-control" id="precioProducto" step="0.01" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="guardarProducto()">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Cliente -->
    <div class="modal fade" id="modalCliente" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Nuevo Cliente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formCliente">
                        <div class="mb-3">
                            <label class="form-label">Nombre</label>
                            <input type="text" class="form-control" id="nombreCliente" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Email</label>
                            <input type="email" class="form-control" id="emailCliente" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Teléfono</label>
                            <input type="tel" class="form-control" id="telefonoCliente" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="guardarCliente()">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Producto Puntos -->
    <div class="modal fade" id="modalPuntos" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Nuevo Producto para Canje</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formProductoPuntos">
                        <div class="mb-3">
                            <label class="form-label">Imagen de Portada</label>
                            <input type="file" class="form-control" id="imagenProductoPuntos" accept="image/*" onchange="previsualizarImagenPuntos(this)">
                            <img id="previewImagenPuntos" src="" alt="Vista previa" style="max-width: 200px; display: none; margin-top: 10px;">
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Nombre del Producto</label>
                            <input type="text" class="form-control" id="nombreProductoPuntos" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Puntos Requeridos</label>
                            <input type="number" class="form-control" id="puntosProductoPuntos" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Stock Disponible</label>
                            <input type="number" class="form-control" id="stockProductoPuntos" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="guardarProductoPuntos()">Guardar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Seleccionar Cliente para Canje -->
    <div class="modal fade" id="modalSeleccionarCliente" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Seleccionar Cliente para Canje</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-info mb-3">
                        <h6>Detalles del Producto:</h6>
                        <p class="mb-1">Producto: <strong id="productoCanjeNombre"></strong></p>
                        <p class="mb-0">Puntos necesarios: <strong id="productoCanjePuntos"></strong></p>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Seleccione un Cliente</label>
                        <select class="form-select" id="selectClienteCanje">
                            <option value="">Seleccione un cliente</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="realizarCanje()">Realizar Canje</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Venta Común -->
    <div class="modal fade" id="modalVentaComun" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Venta Común</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <h4>Total a Pagar: <span id="totalVentaComun">$0.00</span></h4>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Monto Recibido</label>
                        <input type="number" class="form-control" id="montoRecibidoComun" step="0.01" onchange="calcularCambioComun()">
                    </div>
                    <div class="mb-3">
                        <h4>Cambio: <span id="cambioVentaComun">$0.00</span></h4>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="procesarVentaComun()">Completar Venta</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Venta a Cliente -->
    <div class="modal fade" id="modalVentaCliente" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Venta a Cliente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label class="form-label">Seleccionar Cliente</label>
                        <select class="form-select" id="selectClienteVenta" onchange="actualizarInfoCliente()">
                            <option value="">Seleccione un cliente</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <div class="alert alert-info">
                            Puntos actuales: <strong id="puntosClienteVenta">0</strong><br>
                            Puntos a ganar: <strong id="puntosAGanarVenta">0</strong>
                        </div>
                    </div>
                    <div class="mb-3">
                        <h4>Total a Pagar: <span id="totalVentaCliente">$0.00</span></h4>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Monto Recibido</label>
                        <input type="number" class="form-control" id="montoRecibidoCliente" step="0.01" onchange="calcularCambioCliente()">
                    </div>
                    <div class="mb-3">
                        <h4>Cambio: <span id="cambioVentaCliente">$0.00</span></h4>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="procesarVentaCliente()">Completar Venta</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Entrada -->
    <div class="modal fade" id="modalEntrada" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Registrar Entrada de Efectivo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formEntrada">
                        <div class="mb-3">
                            <label class="form-label">Motivo</label>
                            <input type="text" class="form-control" id="motivoEntrada" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Cantidad</label>
                            <input type="number" class="form-control" id="cantidadEntrada" step="0.01" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="registrarEntrada()">Registrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Salida -->
    <div class="modal fade" id="modalSalida" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Registrar Salida de Efectivo</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="formSalida">
                        <div class="mb-3">
                            <label class="form-label">Motivo</label>
                            <input type="text" class="form-control" id="motivoSalida" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Cantidad</label>
                            <input type="number" class="form-control" id="cantidadSalida" step="0.01" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="registrarSalida()">Registrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Historial de Canjes -->
    <div class="modal fade" id="modalHistorialCanjes" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Historial de Canjes</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Fecha</th>
                                    <th>Cliente</th>
                                    <th>Producto</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="historialCanjesBody">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal de Corte -->
    <div class="modal fade" id="modalCorte" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Realizar Corte de Caja</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="fechaCorte" class="form-label">Fecha del Corte</label>
                        <input type="date" class="form-control" id="fechaCorte">
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Ventas</h5>
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Fecha</th>
                                                    <th>Tipo</th>
                                                    <th>Cliente</th>
                                                    <th>Total</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabla-ventas-corte"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Entradas</h5>
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Fecha</th>
                                                    <th>Motivo</th>
                                                    <th>Cantidad</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabla-entradas-corte"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title">Salidas</h5>
                                    <div class="table-responsive">
                                        <table class="table table-sm">
                                            <thead>
                                                <tr>
                                                    <th>#</th>
                                                    <th>Fecha</th>
                                                    <th>Motivo</th>
                                                    <th>Cantidad</th>
                                                </tr>
                                            </thead>
                                            <tbody id="tabla-salidas-corte"></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-3">
                        <h4>Total en Caja: <span id="total-en-caja-corte">$0.00</span></h4>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="realizarCorte()">Realizar Corte</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
    <script>
    console.log('Script cargado');
    window.guardarConfigTicket = guardarConfigTicket;
    </script>
</body>
</html> 